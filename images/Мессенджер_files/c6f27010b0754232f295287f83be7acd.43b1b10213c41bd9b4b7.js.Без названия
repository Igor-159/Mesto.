(window.webpackJsonp=window.webpackJsonp||[]).push([["c6f27010b0754232f295287f83be7acd"],{"/bCM":function(t,e,n){"use strict";n.r(e),n.d(e,"REACTION_ID_DEFAULT",(function(){return r})),n.d(e,"REACTION_ID_MAX",(function(){return i})),n.d(e,"REACTION_ID_MIN",(function(){return o})),n.d(e,"REACTION_SET_ITEMS_MIN_COUNT",(function(){return c}));var r=0,i=7,o=0,c=2},"9xR5":function(t,e,n){"use strict";n.r(e),n.d(e,"calcCounters",(function(){return i})),n.d(e,"calcCountersSum",(function(){return o})),n.d(e,"isValidEnvironment",(function(){return c})),n.d(e,"preloadImage",(function(){return u})),n.d(e,"usePrevious",(function(){return a}));var r=n("q1tI"),i=function(t,e){var n={};return Object.entries(t).forEach((function(t){var r,i,o,c=t[0],u=t[1],a=c,s=null!==(o=null===(i=null===(r=null==e?void 0:e.itemsById)||void 0===r?void 0:r[a])||void 0===i?void 0:i.score)&&void 0!==o?o:1;n[a]=s*(u||0)})),n},o=function(t){return Object.values(t).reduce((function(t,e){return t+(e||0)}),0)},c=function(){var t,e,n;return"function"==typeof(null===(t=window.cur)||void 0===t?void 0:t.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null===(n=null===(e=window.Widgets)||void 0===e?void 0:e.oauth)||void 0===n||n.call(e),!1)},u=function(t){return new Promise((function(e,n){var r=new Image;r.src=t,r.onload=function(){return e()},r.onerror=function(){return n()}}))},a=function(t){var e=r.useRef(t);return r.useEffect((function(){e.current=t})),e.current}},Rafy:function(t,e,n){"use strict";n.r(e),n.d(e,"DEBUG_ENABLED",(function(){return r}));var r=!!n("Xrg9").default.get("reactions.debug_enabled")},crIy:function(t,e,n){"use strict";n.r(e),n.d(e,"storageAddSets",(function(){return l})),n.d(e,"getReactionSet",(function(){return f}));var r=n("HLtZ"),i=n("fBgk"),o=n("Rafy"),c=n("qYuU"),u=n("pruO"),a=n("vkmG"),s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},d=Object(c.makeSharedState)("reactions-storage",(function(){return new Map})),l=function(t){o.DEBUG_ENABLED&&console.log(t),Object.entries(t).forEach((function(t){var e=t[0],n=t[1],o=Object(i.validateReactionSetPayloaditems)(n,e);if(o)Object(r.logError)(o.error);else{var c=n.map((function(t){return s(s({},t),{title:Object(a.decodeHTMLEntities)(t.title)})}));d().set(e,Object(i.prepareReactionMenuSet)(e,c,{imageMenuSize:u.SIZE_MENU,imagePreviewSize:u.SIZE_PREVIEW}))}}))},f=function(t){var e=d().get(t);if(!e){var n=new Error("Reaction set not found: "+t);return Object(r.logError)(n,{environment:"reactions"}),void console.error(n)}return e}},fBgk:function(t,e,n){"use strict";n.r(e),n.d(e,"getDefaultReaction",(function(){return i})),n.d(e,"getDefaultReactionTitle",(function(){return o})),n.d(e,"prepareReactionMenuSet",(function(){return u})),n.d(e,"isValidReactionId",(function(){return a})),n.d(e,"isValidReactionIdState",(function(){return s})),n.d(e,"parseReactionId",(function(){return d})),n.d(e,"validateReactionSetPayloaditems",(function(){return l}));var r=n("/bCM"),i=function(t){return t.itemsById[r.REACTION_ID_DEFAULT]},o=function(t){var e;return null===(e=i(t))||void 0===e?void 0:e.title},c=function(t,e){return 0===t.length?"":(n=t,r=function(t){return Math.pow(e.width-t.width,2)+Math.pow(e.height-t.height,2)},n.reduce((function(t,e){return r(t)<r(e)?t:e}))).url;var n,r},u=function(t,e,n){var r=n.imageMenuSize,i=n.imagePreviewSize,o=e.map((function(t){var e=t.asset,n=t.id,o=t.score,u=t.title,a=t.title_color;return{id:n,imageMenuURL:c(e.images,r),imagePreviewURL:c(e.preview_images,i),score:o,title:u,titleColor:a}})),u={};return o.forEach((function(t){u[t.id]=t})),{id:t,items:o,itemsById:u}},a=function(t){return Number.isInteger(t)&&t>=r.REACTION_ID_MIN&&t<=r.REACTION_ID_MAX},s=function(t){return void 0===t||a(t)},d=function(t){var e=parseInt(t,10);if(a(e))return e},l=function(t,e){if(t.length<r.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error("Invalid reactions items count in set '"+e+"': "+t.length)}}},"p4k+":function(t,e,n){"use strict";n.r(e),n.d(e,"LIKE_TYPE_REACTION",(function(){return b})),n.d(e,"reactionsElemPayload",(function(){return I})),n.d(e,"setDataCurrentId",(function(){return m})),n.d(e,"setDataCounts",(function(){return w})),n.d(e,"updateLikesButtonDom",(function(){return R})),n.d(e,"updateReactionButton",(function(){return E})),n.d(e,"updateReactionsPreviewDom",(function(){return O})),n.d(e,"updateReactionsPreviewOnlyDom",(function(){return p}));var r=n("smNX"),i=n("fBgk"),o=n("crIy"),c=n("9xR5"),u=n("ZxpX"),a=n("zxIV"),s=n("t7n3"),d=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],c=0,u=o.length;c<u;c++,i++)r[i]=o[c];return r},l=function(t,e,n,r,l){var f=function(t,e,n){void 0===n&&(n=!1);var r=void 0!==e?1:0,o=3-r,c=[e].slice(0,r),u=Object.keys(t).map((function(e){return[Object(i.parseReactionId)(e),t[e]]})).filter((function(t){var n=t[0],r=t[1];return void 0!==n&&n!==e&&r&&r>0})).sort((function(t,e){var n=t[1];return(e[1]||0)-(n||0)})).slice(0,o).map((function(t){return t[0]})),a=d(c,u);return n&&a.reverse(),a}(e,r,l),v=t.querySelector(".ReactionsPreview__items"),b=Object(o.getReactionSet)(n);if(v&&b){var g=Object(c.calcCountersSum)(e);v.innerHTML=f.map((function(t){var e=b.itemsById[t];if(!e)return"";var n=Object(u.classNames)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":l,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":!l});return Object(a.rs)(Object(s.getTemplate)("reactions_preview_item"),{image_url:e.imagePreviewURL,title:e.title,class:n})})).join(""),t.classList.toggle("ReactionsPreview--empty",0===g)}else console.warn("Unable to render reaction previews",{itemsContainer:v,reactionSet:b})},f=n("4+be"),v=n("7jxN"),b="reaction",g=function(t){var e=t.getAttribute("data-reaction-counts");if(null===e)return{};var n=e?Object(r.parseJSON)(e):void 0;return"object"==typeof n&&null!==n?n:void 0},I=function(t){var e=t.getAttribute("data-reaction-target-object"),n=t.getAttribute("data-reaction-hash"),r=t.getAttribute("data-reaction-set-id");if(null!==r){var o=t.getAttribute("data-reaction-user-reaction-id"),c=o?Object(i.parseReactionId)(o):void 0,u=!!t.getAttribute("data-reaction-lite");return{counts:g(t),csrfHash:n,isLite:u,objectRaw:e,reactionSetId:r,userReactionId:c}}},m=function(t,e){t.setAttribute("data-reaction-user-reaction-id",void 0===e?"":String(e))},w=function(t,e){t.setAttribute("data-reaction-counts",JSON.stringify(e))},R=function(t,e,n,r,i){"boolean"==typeof i&&function(t,e){t.classList.toggle("active",e)}(t,i),r&&function(t,e){var n,r=Object(f.langNumeric)(e,"%s",!0),i=null!==(n=t.querySelector('[data-section-ref="like-button-count"]'))&&void 0!==n?n:void 0;Object(v.animateCount)(i,r,{str:"auto",noWrapWidth:!0,noSpaceIfEmpty:!0})}(r,n)},E=function(t,e,n){var r=Object(i.getDefaultReaction)(n),o=void 0;void 0===e||(o=n.itemsById[e])?(function(t,e,n){var r=t.querySelector('[data-section-ref="reactions-button-icon"]');if(r)if(e){var i=null==e?void 0:e.imagePreviewURL;r.style.backgroundImage="url('"+i+"')",r.setAttribute("aria-label",null==e?void 0:e.title)}else r.style.backgroundImage="",(null==n?void 0:n.title)&&r.setAttribute("aria-label",null==n?void 0:n.title)}(t,o,r),function(t,e,n){var r,i=t.querySelector('[data-section-ref="reactions-button-title"]');if(i){var o=null===(r=null==e?void 0:e.titleColor)||void 0===r?void 0:r.light,c=o?{color:"#"+o}:{color:null};e?(i.innerText=e.title,Object(a.setStyle)(i,c)):((null==n?void 0:n.title)&&(i.innerText=n.title),Object(a.setStyle)(i,c))}}(t,o,r)):console.error(new Error("Missing reaction meta for "+e+" in set '"+n.id+"'"))},O=function(t,e){var n=e.counts,r=e.isActive,i=e.isLite,u=e.objectRaw,a=e.reactionId,s=e.reactionSetId;w(t,n);var d=Object(o.getReactionSet)(s),f=Object(c.calcCounters)(n,d),v=Object.values(f).reduce((function(t,e){return(t||0)+(e||0)}),0),b=document.querySelector('[data-section-ref="reactions-preview-items"][data-reaction-target-object="'+u+'"]');R(t,u,v,b,r),b&&l(b,n,s,a,i)},p=function(t,e){var n=I(t);n&&n.objectRaw&&O(t,{counts:e,isActive:void 0,isLite:n.isLite,objectRaw:n.objectRaw,reactionId:n.userReactionId,reactionSetId:n.reactionSetId})}},pruO:function(t,e,n){"use strict";n.r(e),n.d(e,"SIZE_MENU",(function(){return r})),n.d(e,"SIZE_PREVIEW",(function(){return i})),n.d(e,"REACTIONS_COUNTS_RESPONSE_FIELD",(function(){return o}));var r={width:128,height:128},i={width:64,height:64},o="reactions_counts"}}]);try{stManager.done("cmodules/bundles/c6f27010b0754232f295287f83be7acd.43b1b10213c41bd9b4b7.js")}catch(t){}